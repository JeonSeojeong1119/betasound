<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beta Sound</title>
  <style>
    @font-face {
      font-family: 'Pretendard-Medium';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/pretendard@1.0/Pretendard-Medium.woff2') format('woff2');
      font-weight: 500;
      font-display: swap;
    }

    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      font-family: 'Pretendard-Medium', sans-serif;
    }

    p { font-size: 18px; line-height: 1.6; }

    .drop-area {
      flex: 1;
      background-image: url("background.png");
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
      position: relative;
      overflow: hidden;
    }

    /* ---------- í•˜ë‹¨ ë°” ---------- */
    .hover-bar {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255,255,255,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 25px;
      padding: 15px 15px;
      z-index: 1000;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .hover-bar img {
      height: 70px;
      cursor: grab;
      transition: transform 0.2s;
    }
    .hover-bar img:hover {
      transform: scale(1.1);
    }

    /* ---------- íŒì—… ---------- */
    .popup {
      position: fixed;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.5);
      padding: 30px 40px;
      border-radius: 20px;
      display: none;
      z-index: 2000;
      width: 750px;
      text-align: center;
      backdrop-filter: blur(15px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .popup img.logo {
      width: 300px;
      display: block;
      margin: 0 auto 20px auto;
    }

    .popup button {
      background-color: #353636;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 12px 25px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .popup button:hover {
      background-color: #555;
    }

    /* ---------- ë‘ ë²ˆì§¸ íŒì—… ---------- */
    .popup-secondary {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.5);
      padding: 25px 35px;
      border-radius: 15px;
      z-index: 2500;
      display: none;
      width: 750px;
      text-align: center;
      backdrop-filter: blur(15px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .popup-secondary button {
      background-color: #353636;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 12px 25px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }

    /* ---------- ë“œë˜ê·¸ëœ ì•„ì´ì½˜ ---------- */
    img.draggable {
      position: absolute;
      cursor: grab;
      user-select: none;
    }

    /* ---------- íœ´ì§€í†µ ---------- */
    #trash {
      width: 70px;
      height: auto;
      cursor: pointer;
      transition: transform 0.2s;
    }
    #trash:hover {
      transform: scale(1.2);
    }

  </style>
</head>
<body>

  <div class="drop-area" id="dropArea"></div>

  <!-- ì²« ë²ˆì§¸ íŒì—… -->
  <div class="popup" id="popup">
    <img src="logo.png" class="logo">
    <p>ë¬´ì–¸ê°€ë¥¼ ë§Œë“œëŠ” ì‚¬ëŒì˜ ì†ëì—ì„œëŠ” ë‹¤ì–‘í•œ ì†Œë¦¬ë“¤ì´ ëŠì„ì—†ì´ íƒ„ìƒí•©ë‹ˆë‹¤.<br>
    ì´ ì†Œë¦¬ë“¤ì€ ì•„ì§ ì™„ì„±ë˜ì§€ ì•Šì•˜ê¸°ì— ë” ìƒìƒí•˜ê³ , ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ë“¤ë ¤ì¤ë‹ˆë‹¤.<br>
    ê°ê°ì€ ë‹¨í¸ì ì´ê³  ë¶ˆì™„ì „í•œ ì†Œë¦¬ë“¤ì¼ì§€ ëª°ë¼ë„, ì´ë“¤ì€ ê´€ëŒê°ì˜ ì†ì„ ê±°ì³ ê²¹ì³ì§€ê³ ,<br>
    ë°°ì—´ë˜ë©° ì¦‰í¥ì ì¸ í•˜ë‚˜ì˜ ì‚¬ìš´ë“œ í’ê²½ìœ¼ë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.<br>
    ì´ëŸ¬í•œ ë°©ì‹ì€ ìš°ë¦¬ë“¤ì˜ ì°½ì˜ì ì¸ ì‹¤í—˜ê³¼ ìƒˆë¡œìš´ ë„ì „ì„ í—ˆìš©í•˜ëŠ”<br>
    â€˜ë² íƒ€ ìŠ¤í˜ì´ìŠ¤â€™ì˜ ëª¨ìŠµê³¼ë„ ë‹®ì•„ ìˆìœ¼ë©°, ì™„ì„±ëœ í•˜ë‚˜ì˜ ê²°ê³¼ë¬¼ì´ ì•„ë‹Œ<br>
    ê³„ì†í•´ì„œ ë³€í™”í•  ìˆ˜ ìˆëŠ” ì¡°í•©ì„ ê´€ëŒê°ì´ ì§ì ‘ ì²´í—˜í•´ë³´ê²Œ ë©ë‹ˆë‹¤.</p>
    <button onclick="openSecondPopup()">ì²´í—˜ë°©ë²•</button>
  </div>

  <!-- ë‘ ë²ˆì§¸ íŒì—… -->
  <div class="popup-secondary" id="popup2">
    <h3>ì†Œë¦¬ë¥¼ ììœ ë¡­ê²Œ ë°°ì¹˜í•´ë³´ì„¸ìš” ğŸ§</h3>
    <p>ì•„ë˜ ì•„ì´ì½˜ë“¤ì„ ë“œë˜ê·¸í•´ì„œ í™”ë©´ì— ë†“ìœ¼ë©´<br>ê°ê°ì˜ ì†Œë¦¬ê°€ ì–´ìš°ëŸ¬ì ¸ ìƒˆë¡œìš´ ì‚¬ìš´ë“œ í’ê²½ì´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.</p>
    <p>ì‚­ì œí•˜ê³ ì‹¶ì€ ì‚¬ìš´ë“œëŠ” ì“°ë ˆê¸°í†µì— ë“œë˜ê·¸í•´ì£¼ì„¸ìš”.</p>
    <button onclick="closeSecondPopup()">ì‹œì‘í•˜ê¸°</button>
  </div>

  <!-- í•˜ë‹¨ ì•„ì´ì½˜ ë°” -->
  <div class="hover-bar" id="hoverBar">
    <img src="icon-b.png" onclick="openPopup()">
    <img src="icon-barrow.png" draggable="true" ondragstart="drag(event)">
    <img src="icon-cone.png" draggable="true" ondragstart="drag(event)">
    <img src="icon-helmet.png" draggable="true" ondragstart="drag(event)">
    <img src="icon-machine.png" draggable="true" ondragstart="drag(event)">
    <img src="icon-roller.png" draggable="true" ondragstart="drag(event)">
    <img src="icon-shovel.png" draggable="true" ondragstart="drag(event)">
    <img id="trash" src="icon-bin1.png" ondragover="allowDrop(event)" ondrop="deleteIcon(event)" alt="trash">
  </div>

  <script>
  const iconAssets = {
    "icon-barrow.png": { img: "img-barrow.PNG", sound: "sound-click.mp3", size: 500, volume: 0.05 },
    "icon-cone.png":   { img: "img-cone.PNG", sound: "sound-drawing.mp3", size: 200, volume: 0.8 },
    "icon-helmet.png": { img: "img-helmet.PNG", sound: "sound-printer.mp3", size: 250, volume: 0.05 },
    "icon-machine.png":{ img: "img-machine.PNG", sound: "sound-tape.mp3", size: 700, volume: 1.0 },
    "icon-roller.png": { img: "img-roller.PNG", sound: "sound-tear.mp3", size: 220, volume: 0.01 },
    "icon-shovel.png": { img: "img-shovel.PNG", sound: "sound-typing.mp3", size: 300, volume: 1.0 }
  };

  const dropArea = document.getElementById('dropArea');
  const audioMap = new Map();

  function openPopup() {
    document.getElementById("popup").style.display = "block";
  }
  function closePopup() {
    document.getElementById("popup").style.display = "none";
  }

  function openSecondPopup() {
    closePopup();
    document.getElementById("popup2").style.display = "block";
  }
  function closeSecondPopup() {
    document.getElementById("popup2").style.display = "none";
  }

  function allowDrop(event) {
    event.preventDefault();
  }

  function drag(event) {
    event.dataTransfer.setData("src", event.target.src);
  }

  dropArea.addEventListener("dragover", allowDrop);

  dropArea.addEventListener("drop", function(event) {
    event.preventDefault();
    const src = event.dataTransfer.getData("src");
    const filename = src.split("/").pop();
    const asset = iconAssets[filename];

    if (asset) {
      const newImg = document.createElement("img");
      newImg.src = asset.img;
      newImg.className = "draggable";
      newImg.id = "icon-" + Date.now();
      newImg.style.width = asset.size + "px";
      newImg.style.left = (event.offsetX - asset.size / 2) + "px";
      newImg.style.top = (event.offsetY - asset.size / 2) + "px";
      dropArea.appendChild(newImg);

      makeMovable(newImg);

      const audio = new Audio(asset.sound);
      audio.volume = Math.min(1, asset.volume);
      audio.loop = true;
      audio.play();

      audioMap.set(newImg.id, audio);

      newImg.draggable = true;
      newImg.addEventListener("dragstart", e => {
        e.dataTransfer.setData("iconId", newImg.id);
      });
    }
  });

  function makeMovable(el) {
    let offsetX, offsetY, isDragging = false;
    el.addEventListener("mousedown", e => {
      isDragging = true;
      offsetX = e.offsetX;
      offsetY = e.offsetY;
      el.style.cursor = "grabbing";
    });
    document.addEventListener("mousemove", e => {
      if (isDragging) {
        const rect = dropArea.getBoundingClientRect();
        el.style.left = (e.clientX - rect.left - offsetX) + "px";
        el.style.top = (e.clientY - rect.top - offsetY) + "px";
      }
    });
    document.addEventListener("mouseup", () => {
      isDragging = false;
      el.style.cursor = "grab";
    });
  }

  function deleteIcon(event) {
    event.preventDefault();
    const iconId = event.dataTransfer.getData("iconId");
    if (iconId) {
      const dragged = document.getElementById(iconId);
      if (dragged) {
        const audio = audioMap.get(iconId);
        if (audio) {
          audio.pause();
          audio.currentTime = 0;
          audioMap.delete(iconId);
        }
        dragged.remove();
      }
    }
  }
  </script>
</body>
</html>
